"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[858],{3858:(s,e,t)=>{t.r(e),t.d(e,{default:()=>I});var o=t(5043);const i={descriptionBlock:"ProfileInfo_descriptionBlock__MW4Z7",wallpaper:"ProfileInfo_wallpaper__jdShW",mainPhoto:"ProfileInfo_mainPhoto__oJMDt",contact:"ProfileInfo_contact__DC-By"};var r=t(9890),n=t(579);const a=s=>{const[e,t]=(0,o.useState)(!1),[i,r]=(0,o.useState)(s.status);(0,o.useEffect)((()=>{r(s.status)}),[s.status]);return(0,n.jsxs)(n.Fragment,{children:[" ",!e&&(0,n.jsx)("div",{children:(0,n.jsxs)("span",{onDoubleClick:()=>{t(!0)},children:[(0,n.jsx)("b",{children:"Status"}),": ",s.status||"NoStatus"]})}),e&&(0,n.jsx)("div",{children:(0,n.jsx)("input",{onChange:s=>{r(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),s.updateStatus(i)},value:i})})]})};var l=t(5926),c=t(5620),d=t(3842);const p=(0,d.A)({form:"edit-profile"})((s=>{let{handleSubmit:e,profile:t}=s;return(0,n.jsxs)("form",{onSubmit:e,children:[(0,n.jsx)("div",{children:(0,n.jsx)("button",{children:"save"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Full Name"}),": ",(0,c.Fv)("Full Name","fullName",[],c.pd)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Looking for a job"}),": ",(0,c.Fv)("","lookingForAJob",[],c.pd,{type:"checkbox"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"My professional skills"}),": ",(0,c.Fv)("My professional skills","lookingForAJobDescription",[],c.fs)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"About me"}),": ",(0,c.Fv)("About me","aboutMe",[],c.fs)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,n.jsxs)("div",{className:i.contact,children:[(0,n.jsxs)("b",{children:[s,":"]}),(0,c.Fv)("".concat(s),"contacts.".concat(s),[],c.pd)]})))]})]})})),h=s=>{let{isOwner:e,profile:t,goToEditMode:o}=s;return(0,n.jsxs)("div",{children:[e&&(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:o,children:"edit"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,n.jsx)(u,{contactTitle:s,contactValue:t.contacts[s]})))]})]})},u=s=>{let{contactTitle:e,contactValue:t}=s;return(0,n.jsxs)("div",{className:i.contact,children:[(0,n.jsx)("b",{children:e}),": ",t]})},j=s=>{let{profile:e,status:t,updateStatus:c,isOwner:d,savePhoto:u,saveProfile:j,...x}=s,[f,m]=(0,o.useState)(!1);if(!e)return(0,n.jsx)(r.Z,{});return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:i.descriptionBlock,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:e.photos.large||l,className:i.mainPhoto,alt:"Profile"}),d&&(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"file",id:"file-input",className:i.fileInput,onChange:s=>{s.target.files.length&&u(s.target.files[0])}})})]}),f?(0,n.jsx)(p,{initialValues:e,profile:e,onSubmit:s=>{j(s),m(!1)}}):(0,n.jsx)(h,{profile:e,goToEditMode:()=>{m(!0)},isOwner:d}),(0,n.jsx)(a,{status:t,updateStatus:c})]})})};var x=t(7211);const f="MyPosts_postsBlock__m0ifO",m="MyPosts_posts__oo0KL",v="Post_item__sYnAs",g=s=>(0,n.jsxs)("div",{className:v,children:[(0,n.jsx)("img",{src:"https://sun1-86.userapi.com/s/v1/ig2/ZhLmYDSCxYUnlJPfApyGwHjUYUwSMfqqD8XWKDuA0z-YnFG3IMWpP4BeUgarc_EP9-dg5d9u0W812ffmiD3HEfZd.jpg?size=400x400&quality=95&crop=228,2,440,440&ava=1",alt:""}),s.message,(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"like "}),s.likesCount]})]});var P=t(5963),b=t(6545);const k=(0,b.$)(10);let S=(0,d.A)({form:"ProfileAddNewPostForm"})((s=>(0,n.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,n.jsx)("div",{children:(0,n.jsx)(P.A,{name:"newPostText",component:c.fs,placeholder:"Enter your message",validate:[b.m,k]})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{children:"Add post"})})]})));const _=o.memo((s=>{let e=s.posts.map((s=>(0,n.jsx)(g,{message:s.message,likesCount:s.likesCount})));return(0,n.jsxs)("div",{className:f,children:[(0,n.jsx)("h3",{children:"My posts"}),(0,n.jsx)(S,{onSubmit:e=>{s.addPost(e.newPostText)}}),(0,n.jsx)("div",{className:m,children:e})]})}));var A=t(2166);const N=(0,A.Ng)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText})),(s=>({addPost:e=>{s((0,x.oL)(e))}})))(_),w=s=>s.profile?(0,n.jsxs)("main",{children:[(0,n.jsx)(j,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,saveProfile:s.saveProfile}),(0,n.jsx)(N,{})]}):(0,n.jsx)("div",{children:"Loading..."});var y=t(3701),F=t(5853),C=t(805);class M extends o.Component{refreshProfile(){let s=this.props.match.params.userId;s||(s=this.props.authorizedUserId,s||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e,t){s.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}render(){return(0,n.jsx)(w,{...this.props,isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})}}const I=(0,C.Zz)((0,A.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth})),{getUserProfile:x.VM,getStatus:x.BS,updateStatus:x.yB,savePhoto:x.Ah,saveProfile:x.Lt}),y.A,F.$)(M)},5853:(s,e,t)=>{t.d(e,{$:()=>l});var o=t(4458),i=t(5043),r=t(2166),n=t(579);let a=s=>({isAuth:s.auth.isAuth});const l=s=>{class e extends i.Component{render(){return this.props.isAuth?(0,n.jsx)(s,{...this.props}):(0,n.jsx)(o.A,{to:"/login"})}}return(0,r.Ng)(a)(e)}}}]);
//# sourceMappingURL=858.31b56d9b.chunk.js.map