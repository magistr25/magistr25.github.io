"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[679,858],{1679:(s,e,t)=>{t.r(e),t.d(e,{default:()=>f});t(5043);var i=t(1967);const o={dialogs:"Dialogs_dialogs__hz+DW",dialogsItems:"Dialogs_dialogsItems__MgQPf",active:"Dialogs_active__9zRhx",messages:"Dialogs_messages__0KmtU"};var a=t(7369),r=t(579);const l=s=>(0,r.jsx)("div",{className:o.dialog+" "+o.active,children:(0,r.jsx)(a.A,{to:"/dialogs/"+s.id,children:s.name})}),n=s=>(0,r.jsx)("div",{className:o.message,children:s.message});var d=t(4458),c=t(5963),h=t(3842),u=t(5620),p=t(6545);const m=(0,h.A)({form:"dialog-add-message-form"})((s=>{let e=(0,p.$)(50);return(0,r.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)(c.A,{component:u.fs,name:"newMessageBody",placeholder:"Write a message",validate:[p.m,e]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{children:"Send"})})]})})),j=s=>{let e=s.dialogsPage,t=e.dialogs.map((s=>(0,r.jsx)(l,{name:s.name,id:s.id},s.id))),i=e.messages.map((s=>(0,r.jsx)(n,{message:s.message,id:s.id},s.id)));return s.isAuth?(0,r.jsxs)("div",{className:o.dialogs,children:[(0,r.jsx)("div",{className:o.dialogsItems,children:t}),(0,r.jsx)("div",{className:o.messages,children:(0,r.jsx)("div",{children:i})}),(0,r.jsx)(m,{onSubmit:e=>{s.sendMessage(e.newMessageBody)}})]}):(0,r.jsx)(d.A,{to:"/login"})};var x=t(2166),g=(t(3858),t(5853));const f=(0,t(805).Zz)((0,x.Ng)((s=>({dialogsPage:s.dialogsPage})),(s=>({sendMessage:e=>{s((0,i.gj)(e))}}))),g.$)(j)},3858:(s,e,t)=>{t.r(e),t.d(e,{default:()=>C});var i=t(5043);const o={descriptionBlock:"ProfileInfo_descriptionBlock__MW4Z7",wallpaper:"ProfileInfo_wallpaper__jdShW",mainPhoto:"ProfileInfo_mainPhoto__oJMDt",contact:"ProfileInfo_contact__DC-By"};var a=t(9890),r=t(579);const l=s=>{const[e,t]=(0,i.useState)(!1),[o,a]=(0,i.useState)(s.status);(0,i.useEffect)((()=>{a(s.status)}),[s.status]);return(0,r.jsxs)(r.Fragment,{children:[" ",!e&&(0,r.jsx)("div",{children:(0,r.jsxs)("span",{onDoubleClick:()=>{t(!0)},children:[(0,r.jsx)("b",{children:"Status"}),": ",s.status||"NoStatus"]})}),e&&(0,r.jsx)("div",{children:(0,r.jsx)("input",{onChange:s=>{a(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),s.updateStatus(o)},value:o})})]})};var n=t(5926),d=t(5620),c=t(3842);const h=(0,c.A)({form:"edit-profile"})((s=>{let{handleSubmit:e,profile:t}=s;return(0,r.jsxs)("form",{onSubmit:e,children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{children:"save"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Full Name"}),": ",(0,d.Fv)("Full Name","fullName",[],d.pd)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Looking for a job"}),": ",(0,d.Fv)("","lookingForAJob",[],d.pd,{type:"checkbox"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"My professional skills"}),": ",(0,d.Fv)("My professional skills","lookingForAJobDescription",[],d.fs)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"About me"}),": ",(0,d.Fv)("About me","aboutMe",[],d.fs)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,r.jsxs)("div",{className:o.contact,children:[(0,r.jsxs)("b",{children:[s,":"]}),(0,d.Fv)("".concat(s),"contacts.".concat(s),[],d.pd)]})))]})]})})),u=s=>{let{isOwner:e,profile:t,goToEditMode:i}=s;return(0,r.jsxs)("div",{children:[e&&(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:i,children:"edit"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Full Name"}),": ",t.fullName]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,r.jsx)(p,{contactTitle:s,contactValue:t.contacts[s]})))]})]})},p=s=>{let{contactTitle:e,contactValue:t}=s;return(0,r.jsxs)("div",{className:o.contact,children:[(0,r.jsx)("b",{children:e}),": ",t]})},m=s=>{let{profile:e,status:t,updateStatus:d,isOwner:c,savePhoto:p,saveProfile:m,...j}=s,[x,g]=(0,i.useState)(!1);if(!e)return(0,r.jsx)(a.Z,{});return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:o.descriptionBlock,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:e.photos.large||n,className:o.mainPhoto,alt:"Profile"}),c&&(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"file",id:"file-input",className:o.fileInput,onChange:s=>{s.target.files.length&&p(s.target.files[0])}})})]}),x?(0,r.jsx)(h,{initialValues:e,profile:e,onSubmit:s=>{m(s),g(!1)}}):(0,r.jsx)(u,{profile:e,goToEditMode:()=>{g(!0)},isOwner:c}),(0,r.jsx)(l,{status:t,updateStatus:d})]})})};var j=t(7211);const x="MyPosts_postsBlock__m0ifO",g="MyPosts_posts__oo0KL",f="Post_item__sYnAs",v=s=>(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("img",{src:"https://sun1-86.userapi.com/s/v1/ig2/ZhLmYDSCxYUnlJPfApyGwHjUYUwSMfqqD8XWKDuA0z-YnFG3IMWpP4BeUgarc_EP9-dg5d9u0W812ffmiD3HEfZd.jpg?size=400x400&quality=95&crop=228,2,440,440&ava=1",alt:""}),s.message,(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:"like "}),s.likesCount]})]});var P=t(5963),b=t(6545);const _=(0,b.$)(10);let S=(0,c.A)({form:"ProfileAddNewPostForm"})((s=>(0,r.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,r.jsx)("div",{children:(0,r.jsx)(P.A,{name:"newPostText",component:d.fs,placeholder:"Enter your message",validate:[b.m,_]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{children:"Add post"})})]})));const A=i.memo((s=>{let e=s.posts.map((s=>(0,r.jsx)(v,{message:s.message,likesCount:s.likesCount})));return(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("h3",{children:"My posts"}),(0,r.jsx)(S,{onSubmit:e=>{s.addPost(e.newPostText)}}),(0,r.jsx)("div",{className:g,children:e})]})}));var k=t(2166);const N=(0,k.Ng)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText})),(s=>({addPost:e=>{s((0,j.oL)(e))}})))(A),M=s=>s.profile?(0,r.jsxs)("main",{children:[(0,r.jsx)(m,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,saveProfile:s.saveProfile}),(0,r.jsx)(N,{})]}):(0,r.jsx)("div",{children:"Loading..."});var w=t(3701),y=t(5853),F=t(805);class D extends i.Component{refreshProfile(){let s=this.props.match.params.userId;s||(s=this.props.authorizedUserId,s||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e,t){s.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}render(){return(0,r.jsx)(M,{...this.props,isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})}}const C=(0,F.Zz)((0,k.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth})),{getUserProfile:j.VM,getStatus:j.BS,updateStatus:j.yB,savePhoto:j.Ah,saveProfile:j.Lt}),w.A,y.$)(D)},5853:(s,e,t)=>{t.d(e,{$:()=>n});var i=t(4458),o=t(5043),a=t(2166),r=t(579);let l=s=>({isAuth:s.auth.isAuth});const n=s=>{class e extends o.Component{render(){return this.props.isAuth?(0,r.jsx)(s,{...this.props}):(0,r.jsx)(i.A,{to:"/login"})}}return(0,a.Ng)(l)(e)}}}]);
//# sourceMappingURL=679.179a98b9.chunk.js.map